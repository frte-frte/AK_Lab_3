# AK_Lab_3
- Самсонов Демьян Александрович, PЗ216
- asm | risc | harv | hw | instr | struct | stream | port | pstr | prob1
- Упрощённый вариант
## Описание варианта
- asm -- синтаксис ассемблера. Необходима поддержка label-ов.
- risc -- система команд должна быть упрощенной, в духе RISC архитектур:
  - стандартизированная длина команд;
  - операции над данными осуществляются только в рамках регистров;
  - доступ к памяти и ввод-вывод -- отдельные операции (с учётом специфики вашего варианта mem/port);
- harv -- Гарвардская архитектура:
  - в тестах необходимо привести/проверить как память команд, так и память данных.
- hw -- hardwired. Реализуется как часть модели.
- instr -- процессор необходимо моделировать с точностью до каждой инструкции (наблюдается состояние после каждой инструкции).
- struct -- в виде высокоуровневой структуры данных. Считается, что одна инструкция укладывается в одно машинное слово, за исключением CISC архитектур.
- stream
  - при старте модели у вас есть буфер, в котором представлены все данные ввода (['h', 'e', 'l', 'l', 'o']);
  - при обращении к вводу (выполнение инструкции) модель процессора получает "токен" (символ) информации;
  - если данные в буфере кончились -- останавливайте моделирование;
  - вывод данных реализуется аналогично, по выполнении команд в буфер вывода добавляется ещё один символ;
  - по окончании моделирования показать все выведенные данные;
  - логика работы с буфером реализуется в рамках модели на Python.
- port -- port-mapped (специальные инструкции для ввода-вывода)
  - адресация портов ввода-вывода должна присутствовать.
- pstr -- Length-prefixed (Pascal string)
- prob1. Multiples of 3 or 5 
### Язык программирования - ASM
```
<program>      ::= <instruction> | <instruction> <program>

<instruction>  ::= <label> ":" <operation> | <operation>

<operation>    ::= <data_op> | <memory_op> | <io_op> | <control_op>

<data_op>      ::= "ADD" <reg> "," <reg> "," <reg>
                 | "SUB" <reg> "," <reg> "," <reg>
                 | "MUL" <reg> "," <reg> "," <reg>
                 | "DIV" <reg> "," <reg> "," <reg>
                 | "MOV" <reg> "," <reg>
                 | "INC" <reg>
                 | "DEC" <reg>

<memomry_op>   ::= "LOAD" <reg> "," <mem_addr>
                 | "STORE" <reg> "," <mem_addr>

<io_op>        ::= "IN" <reg> "," "port_addr"
                 | "OUT" <port_addr> "," <reg>    

<control_op>   ::= "JMP" <label>
                 | "JZ" <reg> "," <label>
                 | "HALT"

<label>        ::= <identifier>
<reg>          ::= "R" <digit>
<mem_addr>     ::= "[" <number> "}"
<port_addr>    ::= "[" <number> "]"
<identifier>   ::= <letter> {<letter> | <digit>}
<number>       ::= <digit> {digit}
<digit>        ::= "0" | "1" | "2" | "3" | "4" | "5" | "6" | "7" | "8" | "9"
<letter>       ::= "a" | "b" | ... | "z"| "A" | "B" | ... | "Z"
```
### Семантика
- **Стратегия вычислений**
  - Каждая команда выполняется за один такт
  - Все операции с данными выполняются только над регистрами, а доступ к памяти и ввод-вывод выполняются отдельными командами.
  - Программа и данные хранятся раздельно. Инструкции обрабатываются из одного набора памяти (инструкции), а данные читаются и пишутся в другой (данные).
  - Команды исполняются последовательно, если не встречается команды управления.
- **Области видимости** 
  - **Метки**: Доступны глобально в пределах программы и используются для переходов.
  - **Регистры**: Ограниченная область — в пределах каждого вычисления.
  - **Память**: Доступна глобально через команды ```LOAD``` и ```STORE```.
  - **Порты**: Имеют адресацию через инструкции ```IN``` и ```OUT``` и используются для работы с внешними устройствами.
- **Типизация и виды литералов**
  - **Неявная типизация**: Типы данных неявны, и все данные считаются целыми числами.
  - **Целые числа**: Могут быть использованы как операнды или адреса.
  - **Паскаль-строки**: В инструкциях работы с памятью или портами могут использоваться строки с длиной-префиксом.  
    
    
